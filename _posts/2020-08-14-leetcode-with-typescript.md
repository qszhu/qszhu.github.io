---
layout: post
title: LeetCode TypeScriptè§£é¢˜å·¥å…·
date: 2020-08-17 01:47:00 +0800
tags: [typescript, leetcode]
---

### 1. èƒŒæ™¯

æœ€è¿‘ä»æŸä¸ªæ¸ é“è·èµ äº†`LeetCode`ä¼šå‘˜ï¼Œå¿ƒæƒ³ä¸ç”¨ç™½ä¸ç”¨ï¼Œå°±ä¸Šå»çœ‹äº†ä¸€ä¸‹ã€‚ç»“æœååˆ†éœ‡æƒŠã€‚ä¸€æ˜¯æœ‰äº†ç‹¬ç«‹çš„ä¸­æ–‡ç½‘ç«™ï¼Œè¿˜æœ‰å®šæœŸæ¯”èµ›æ¯æ—¥æ‰“å¡ç­‰ï¼Œçœ‹ä¸Šå»ä¼¼ä¹æå¾—æœ‰å£°æœ‰è‰²ã€‚äºŒæ˜¯å¦‚ä»Šç«Ÿç„¶å·²ç»æœ‰äº†è¿‘2000é¢˜ï¼Œä¿ºå½“å¹´åˆ·å®Œçš„100å¤šé¢˜é¡¿æ—¶æ˜¾å¾—å¾®ä¸è¶³é“ã€‚ä¸‰æ˜¯æ”¯æŒçš„è¯­è¨€å¤šäº†è®¸å¤šï¼Œ`Go`ã€`Swift`ã€`Rust`ç­‰å¦‚ä»Šè¿ˆå…¥ä¸»æµçš„è¯­è¨€éƒ½æœ‰äº†ã€‚

ä¸è¿‡å…¶ä¸­`TypeScript`çš„æ”¯æŒè¿˜æ ‡ç€"Beta"å­—æ ·ã€‚å…¶å®åªè¦ç½‘ç«™æ”¯æŒ`JavaScript`ï¼Œå°±å¯ä»¥è‡ªè¡Œè½¬è¯‘`TypeScript`ä»£ç ä¸º`JavaScript`ä»£ç åæäº¤ã€‚è¿™ä¹Ÿæ˜¯å·¥ä¸šç•Œåœ¨éƒ¨ç½²`TypeScript`å·¥ç¨‹æ—¶çš„åšæ³•ã€‚ç›¸æ¯”`LeetCode`ä¸Šçš„â€œå¼€ç®±å³ç”¨â€ï¼Œç¼ºç‚¹æ˜¯éœ€è¦åœ¨æœ¬åœ°å…ˆæ­å»ºå·¥ç¨‹æ¡†æ¶ï¼Œä¼˜ç‚¹åˆ™æ˜¯å¯ä»¥ä½¿ç”¨æœ¬åœ°çš„ç¼–è¾‘å™¨æˆ–IDEï¼Œå¯ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œä»¥åŠå¯ä»¥è‡ªå®šä¹‰ç¼–è¯‘å™¨é€‰é¡¹å’Œä»£ç æ£€æŸ¥è§„åˆ™ç­‰ã€‚

ç»“æœå°±æ˜¯[ts-leetcode](https://github.com/qszhu/ts-leetcode)é¡¹ç›®ï¼Œæä¾›äº†åœ¨æœ¬åœ°ç¼–è¾‘tsé¢˜è§£å’Œæµ‹è¯•æäº¤çš„åŠŸèƒ½ã€‚è™½ç„¶åŠŸèƒ½è¯´èµ·æ¥ç®€å•ï¼Œä½†é¡¹ç›®åˆ°è¾¾å½“å‰çš„çŠ¶æ€ï¼Œä¹Ÿå…ˆåç»å†äº†ä¸‰ä¸ªç‰ˆæœ¬ï¼Œå€¼å¾—è¯´ä¸€ä¸‹ã€‚

### 2. V1

ç¬¬ä¸€ä¸ªç‰ˆæœ¬[1]ç”¨`Hygen`[2]ç”Ÿæˆæœ¬åœ°çš„è§£é¢˜æ¨¡ç‰ˆ[3]ã€‚ç‰¹ç‚¹æ˜¯å¯åœ¨æœ¬åœ°è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå¹¶ä¸”ç”¨`nodemon`å¯¹æ›´æ–°çš„ä»£ç æŒç»­è¿›è¡Œæµ‹è¯•ï¼Œæ¯”è¾ƒç¬¦åˆä¸šç•Œçš„é€šç”¨åšæ³•ã€‚å¯¹äºç”Ÿæˆçš„ä»£ç è¿˜å¯ä»¥é€‰æ‹©è¿›è¡Œå‹ç¼©å’Œæ··æ·†ã€‚

ç¬¬ä¸€ç‰ˆè™½ç„¶å·²ç»å¯ç”¨ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š

* é¦–å…ˆæ˜¯æ¨¡ç‰ˆçš„é€‚ç”¨èŒƒå›´ä¸è¶³ã€‚æ¯”å¦‚`LeetCode`ä¸Šä¸ä»…ä»…æœ‰ç®—æ³•é¢˜ï¼Œè¿˜æœ‰è®¾è®¡é¢˜ç­‰ï¼Œæ¨¡ç‰ˆå°±åº”è¯¥æ˜¯ä¸åŒçš„ï¼Œä½†åœ¨ä¸è¯»å–é¢˜ç›®å†…å®¹çš„æƒ…å†µä¸‹å°±æ˜¯æ— æ³•åŒºåˆ†çš„ã€‚
* å…¶æ¬¡æ˜¯æµ‹è¯•æ•°æ®çš„å½¢å¼å¤šæ ·ã€‚æ¯”å¦‚é“¾è¡¨äºŒå‰æ ‘å’Œå›¾ç­‰ï¼Œéœ€è¦åœ¨æµ‹è¯•ä»£ç ä¸­æŠŠæµ‹è¯•æ•°æ®ååºåˆ—åŒ–æˆè§„å®šçš„æ•°æ®ç»“æ„ã€‚è€Œè¿™éƒ¨åˆ†å·¥ä½œ`LeetCode`ç½‘ç«™å·²ç»åšäº†ï¼Œæ²¡å¿…è¦é‡å¤åšã€‚

ä»¥ä¸Šè¿™äº›éƒ½è¯´æ˜äº†éœ€è¦ä¸`LeetCode`ç½‘ç«™è¿›è¡Œæ›´æ·±å…¥çš„äº¤äº’ï¼Œäºæ˜¯å°±æœ‰äº†ç¬¬äºŒä¸ªç‰ˆæœ¬ã€‚

### 3. V2

ç¬¬äºŒä¸ªç‰ˆæœ¬[4]çš„æ ¸å¿ƒæ˜¯ä¸`LeetCode`ç½‘ç«™çš„äº¤äº’ï¼Œæ‰€ä»¥éœ€è¦æ•è·æµè§ˆå™¨å‘ç½‘ç«™å‘é€çš„è¯·æ±‚åè¿›è¡Œåˆ†æã€‚ç”¨åˆ°çš„æ¥å£æœ‰è¿™ä¹ˆå‡ ä¸ªï¼š

#### è·å–é¢˜ç›®ä¿¡æ¯ï¼ˆ`POST /graphql/`ï¼‰

å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ª`graphql`æ¥å£ï¼ˆæŸ¥è¯¢`questionData`ï¼‰æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è‡ªè¡Œé€‰æ‹©éœ€è¦è¿”å›çš„æ•°æ®ï¼š

* `sampleTestCase`: é¢˜ç›®é‡Œæä¾›çš„æ ·ä¾‹æµ‹è¯•æ•°æ®
* `metaData`: è¦å®ç°çš„å‡½æ•°æˆ–æ˜¯ç±»çš„ç­¾åï¼Œç”¨äºä»æ¨¡ç‰ˆç”Ÿæˆè§£é¢˜ä»£ç 

#### æµ‹è¯•ä»£ç ï¼ˆ`POST /problems/:titleSlug/interpret_solution/`ï¼‰

ç”¨äºè‡ªè¡Œæ¯”å¯¹æµ‹è¯•æ•°æ®çš„æ¥å£ï¼Œä¸Šä¼ ä»£ç åä¼šè¿”å›ï¼š

* `interpret_id`: ä¸Šä¼ ä»£ç çš„è¿è¡Œä»»åŠ¡id
* `interpret_expected_id`: æ ‡å‡†ç¨‹åºçš„è¿è¡Œä»»åŠ¡id

éœ€ä½¿ç”¨ä¸‹é¢çš„ç»“æœæ£€æŸ¥æ¥å£è·å¾—è¿è¡Œç»“æœ

#### æ£€æŸ¥è¿è¡Œç»“æœï¼ˆ`GET /submissions/detail/:id/check/`ï¼‰

ä¼ å…¥æ‰§è¡Œä»»åŠ¡çš„idå³å¯çŸ¥é“è¿è¡ŒçŠ¶æ€å’Œè¾“å‡ºç»“æœç­‰

#### æäº¤ä»£ç ï¼ˆ`POST /problems/:titleSlug/submit/`ï¼‰

ä¸Šä¼ ä»£ç åä¼šè¿”å›`submission_id`ï¼Œå†ä½¿ç”¨ç»“æœæ£€æŸ¥çš„æ¥å£æ£€æŸ¥å³å¯

#### ç”¨æˆ·è®¤è¯

é™¤äº†è·å–é¢˜ç›®ä¿¡æ¯çš„æ¥å£ä»¥å¤–ï¼Œä¸Šè¿°çš„æ¥å£éƒ½éœ€è¦è¿›è¡Œç”¨æˆ·è®¤è¯ã€‚è¯·æ±‚cookieä¸­éœ€å¸¦ä¸Š`LEETCODE_SESSION`å’Œ`csrfToken`ã€‚ä¸è¿‡å®é™…æµ‹è¯•æ—¶å‘ç°ä¾æ—§ä¼šè¿”å›CSRFéªŒè¯é”™è¯¯çš„ä¿¡æ¯ã€‚æ›´å¤šæµ‹è¯•ä¹‹åå‘ç°èµ·ä½œç”¨çš„æ˜¯`Referer`å¤´ï¼Œç”šè‡³ä¸å¸¦`csrfToken`ä¹Ÿå¯ä»¥ï¼ˆæ„Ÿè§‰å¯ä»¥æç‚¹äº‹æƒ…â€¦â€¦ï¼‰

è‡³æ­¤æ•´ä¸ªé¡¹ç›®è‡ªç”¨å·²ç»å·®ä¸å¤šäº†ï¼Œä½†æ”¯æŒç”¨çš„è„šæœ¬å’Œè§£é¢˜å·¥ç¨‹æ–‡ä»¶éƒ½æ··åœ¨ä¸€èµ·ï¼Œä¸åˆ©äºå‘å¸ƒã€‚äºæ˜¯åˆæœ‰äº†ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ã€‚

### 4. V3

ç¬¬ä¸‰ä¸ªç‰ˆæœ¬æ˜¯å½“å‰ç‰ˆæœ¬[5]ï¼Œä¸»è¦æ˜¯æŠŠå‘½ä»¤è¡Œå·¥å…·å•ç‹¬æ‹†å‡ºæ¥ï¼Œæ–¹ä¾¿å‘å¸ƒã€‚æ­¤å¤–è¿˜ç”¨`webpack`è¿›è¡Œæ‰“åŒ…ï¼Œè¿™æ ·å°±å¯ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹åº“ä½¿ç”¨äº†ã€‚

å…¶å®ç¬¬ä¸€ç‰ˆçš„æ—¶å€™å°è¯•è¿‡ä½¿ç”¨`webpack`ï¼Œä¸è¿‡å½“æ—¶æƒ³è¦ææˆå¤šä¸ª`entry`å’Œå¤šä¸ª`output`ï¼Œç»“æœæ²¡æèµ·æ¥ã€‚å…¶å®`webpack`çš„configå¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°[6]ï¼Œè¿™æ ·å°±å¯ä»¥ä¼ å…¥ä¸åŒçš„å‚æ•°æ¥æ”¹å˜`entry`å’Œ`output`äº†ã€‚

æ­¤å¤–`output`éœ€è¦è¾“å‡ºä¸€ä¸ªå‘½åçš„library[7]ï¼Œå› ä¸º`LeetCode`ä¼¼ä¹æ˜¯åœ¨ä½ ä¸Šä¼ çš„ä»£ç åç›´æ¥æ‹¼æ¥å…¶ä»–çš„æ”¯æŒä»£ç å†è¿è¡Œçš„ï¼Œæ‰€ä»¥éœ€è¦èƒ½å¤Ÿåœ¨å½“å‰æ–‡ä»¶ä¸­æ‰¾åˆ°é¢˜ç›®è§„å®šçš„å‡½æ•°åæˆ–ç±»åã€‚

### 5. å…¶ä»–

å®é™…ä½¿ç”¨çš„è¯ï¼Œè®¾ç½®`LEETCODE_SESSION`è¿™ä¸€æ­¥æ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦ç”¨æˆ·å…·å¤‡ä¸€äº›æŠ€æœ¯èƒ½åŠ›ã€‚è€Œä¸”cookieè¿‡æœŸåè¿˜è¦é‡æ–°è®¾ç½®ã€‚æ›´ç›´è§‚çš„åšæ³•åº”è¯¥æ˜¯æ”¯æŒè‡ªåŠ¨ç™»å½•çš„ï¼Œä¸è¿‡çœ‹äº†ä¸‹ä¼¼ä¹æœ‰ç‚¹å¤æ‚ã€‚`leetcode-cn.com`çš„ç™»å½•æ•´åˆäº†é˜¿é‡Œäº‘çš„æ— ç—•éªŒè¯[8]ï¼Œç™»å½•æ—¶ä¼šå‘é€ä¸€ä¸²æµè§ˆå™¨æœ¬åœ°ç”Ÿæˆçš„æ•°æ®ï¼Œæ²¡æœ‰çš„è¯å°±ç›´æ¥æ‹’ç»è¯·æ±‚äº†ï¼Œç­‰æœ‰æ—¶é—´å†æäº†ã€‚çœ‹äº†ä¸‹ç›¸å…³åŠŸèƒ½ä»‹ç»ï¼Œä¹Ÿæ— æ€ªä¹ä¸€ä¸ªåˆ·é¢˜çš„ç½‘ç«™ä¼šå‘é€é˜¿é‡Œç³»çš„cookieäº†ã€‚å°†æ¥æ˜¯ä¸æ˜¯ä¼šè¿™è¾¹åˆšåˆ·å®Œé¢˜ï¼Œé‚£è¾¹æ·˜å®å°±æ¨é€é”®ç›˜é¼ æ ‡æ˜¾ç¤ºå™¨çš„é“¾æ¥å‘¢ï¼ŸğŸ¤ª

Updateï¼šèŠ±æ—¶é—´çœ‹äº†ä¸‹è‡ªåŠ¨ç™»å½•ï¼Œé€šè¿‡`puppeteer`å¯ä»¥æã€‚éœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯é˜¿é‡Œäº‘çš„æ— ç—•éªŒè¯åº”è¯¥ä¼šæ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å·¥ä½œåœ¨`webdriver`æ¨¡å¼ä¸‹ï¼Œæ‰€ä»¥éœ€è¦æŠŠ`webdriver`å±æ€§è¦†ç›–æ‰ï¼š

```javascript
await page.evaluate(() => {
  Object.defineProperty(navigator, 'webdriver', {
    get: () => false,
  })
})
```

æ­¤å¤–ç‚¹å‡»å’Œè¾“å…¥éœ€è¦åŠ å…¥ä¸€äº›å»¶æ—¶æ¥æ¨¡æ‹Ÿäººå·¥æ“ä½œï¼Œå¦åˆ™ä¹Ÿæœ‰å¯èƒ½è¢«æ‹’ç»ç™»å½•ã€‚ä»£ç å·²æ›´æ–°ã€‚

### å‚è€ƒèµ„æ–™
* [1] [GitHub - qszhu/ts-leetcode at v1](https://github.com/qszhu/ts-leetcode/tree/v1)
* [2] [Hygen \| Hygen](https://www.hygen.io/)
* [3] [ts-leetcode/_templates/leetcode/with-prompt at v1 Â· qszhu/ts-leetcode Â· GitHub](https://github.com/qszhu/ts-leetcode/tree/v1/_templates/leetcode/with-prompt)
* [4] [GitHub - qszhu/ts-leetcode at v2](https://github.com/qszhu/ts-leetcode/tree/v2)
* [5] [GitHub - qszhu/ts-leetcode](https://github.com/qszhu/ts-leetcode)
* [6] [Configuration Types \| webpack](https://webpack.js.org/configuration/configuration-types/#exporting-a-function)
* [7] [Output \| webpack](https://webpack.js.org/configuration/output/#outputlibrary)
* [8] [åŠŸèƒ½æ¦‚è¿°_æ— ç—•éªŒè¯_äººæœºéªŒè¯-é˜¿é‡Œäº‘](https://help.aliyun.com/document_detail/122071.html)
